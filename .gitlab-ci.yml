include:
  - local: ci-templates/test.gitlab-ci.yml
  - local: ci-templates/publish.gitlab-ci.yml
  - local: ci-templates/docs.gitlab-ci.yml
  - template: Workflows/MergeRequest-Pipelines.gitlab-ci.yml

default:
  before_script:
    - echo "before_script"
  after_script:
    - echo "after_script"

build:
  script:
    - echo "before build"
    - !reference [.build, script]

test:
  script:
    - echo "before install poetry"
    - !reference [.snippets, install-poetry]
    - echo "after install poetry"
    - poetry run pytest --version
    - poetry run pytest -vv

publish:
  script:
    - echo "publish as $CI_COMMIT_TAG"
